/* =============================================================================
  styles.css — Calendario · Musicala (vPRO LIGHT) — Brand Edition PRO+++ (Ultra)
  -----------------------------------------------------------------------------
  ✅ 100% light (regla Musicala)
  ✅ Header premium + logo + acciones
  ✅ Overview (Hoy / Próximos 7) con items clicables
  ✅ Controles: buscador PRO + segmented + filtros (incluye Asignado)
  ✅ Calendar grid estable + chips compactos + "@persona"
  ✅ SIN "+N más": se ven TODOS los eventos (scroll interno si se desborda)
  ✅ Full width: calendario a lo ancho de pantalla
  ✅ Modal limpio + “Eventos del día” + scroll seguro
  ✅ Toast (si existe #toastHost en HTML)
============================================================================= */

/* =========================
   Variables (Manual Musicala + UI Light)
========================= */
:root{
  /* Manual Musicala — primarios */
  --mozart:#0C41C4;
  --bach:#220A63;
  --beethoven:#680DBF;
  --vivaldi:#5729FF;
  --brahms:#CE0071;

  /* Manual Musicala — secundarios */
  --wagner:#0C0A1E;
  --haydn:#E6E8E8;
  --debussy:#F9F9F9;

  /* UI light */
  --bg: var(--debussy);
  --panel:#ffffff;
  --panel2:#fbfcff;
  --panel3:#f6f7ff;

  --ink:#0f172a;
  --muted:#667085;
  --muted2:#98a2b3;

  --line:rgba(15,23,42,.10);
  --line2:rgba(15,23,42,.14);
  --line3:rgba(15,23,42,.18);

  --ok:#16a34a;
  --warn:#f59e0b;
  --bad:#ef4444;

  --r:18px;
  --r2:14px;
  --r3:12px;

  --shadow:0 18px 50px rgba(15,23,42,.10);
  --shadow2:0 10px 22px rgba(15,23,42,.08);
  --shadow3:0 6px 16px rgba(15,23,42,.08);

  --focus:0 0 0 4px rgba(12,65,196,.18);
  --focus-strong:0 0 0 4px rgba(12,65,196,.24), 0 12px 30px rgba(12,65,196,.14);

  --header-bg: rgba(255,255,255,.86);
  --header-blur: 10px;

  --tap: 44px;

  /* density */
  --gap: 12px;
  --chip-pad: 7px 10px;

  /* calendar sizing */
  --cal-min-col: 150px;     /* ancho mínimo por día en pantallas pequeñas (para scroll horizontal) */
  --day-min-h: 128px;       /* alto mínimo de cada día */
  --day-max-h: 220px;       /* alto máximo visible antes de scroll interno (para ver "todo" sin truncar) */

  /* gradient helpers */
  --g1: radial-gradient(1100px 600px at 10% -10%, rgba(12,65,196,.10), transparent 55%);
  --g2: radial-gradient(900px 520px at 100% 0%, rgba(206,0,113,.10), transparent 55%);
}

/* =========================
   Base
========================= */
*{ box-sizing:border-box; }
html,body{ height:100%; }

body{
  margin:0;
  font-family: Roboto, Inter, system-ui, -apple-system, Segoe UI, Ubuntu, Arial, sans-serif;
  color:var(--ink);
  background: var(--g1), var(--g2), var(--bg);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

a{ color:inherit; }
::selection{ background:rgba(12,65,196,.18); }

:focus{ outline:none; }
:focus-visible{ box-shadow: var(--focus); border-color: rgba(12,65,196,.35) !important; }

/* Scrollbars suaves */
*{
  scrollbar-width: thin;
  scrollbar-color: rgba(15,23,42,.25) rgba(15,23,42,.06);
}
*::-webkit-scrollbar{ height:10px; width:10px; }
*::-webkit-scrollbar-thumb{
  background: rgba(15,23,42,.22);
  border-radius: 999px;
  border: 3px solid rgba(255,255,255,.65);
}
*::-webkit-scrollbar-track{
  background: rgba(15,23,42,.06);
  border-radius: 999px;
}

/* =========================
   Utils
========================= */
.hidden{ display:none !important; }
.modal-open{ overflow:hidden; }
.muted{ color: var(--muted); }
.small{ font-size: 12px; color: var(--muted); }

.sr-only{
  position:absolute !important;
  width:1px !important;
  height:1px !important;
  padding:0 !important;
  margin:-1px !important;
  overflow:hidden !important;
  clip:rect(0,0,0,0) !important;
  white-space:nowrap !important;
  border:0 !important;
}

/* Skip link: NO se muestra a menos que uses teclado */
.skip-link{
  position: absolute;
  left: 12px;
  top: 10px;
  z-index: 999;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(12,65,196,.25);
  background: rgba(255,255,255,.92);
  box-shadow: var(--shadow3);
  font-weight: 900;
  color: var(--bach);
  transform: translateY(-140%);
  transition: transform .18s ease;
}
.skip-link:focus{
  transform: translateY(0);
  box-shadow: var(--focus-strong);
}

.kbd{
  display:inline-flex; align-items:center; justify-content:center;
  padding: 2px 6px; border-radius: 8px;
  border: 1px solid rgba(15,23,42,.12);
  background: rgba(255,255,255,.8);
  font-weight: 900; font-size: 11px; color: var(--bach);
}

/* =========================
   Header
========================= */
.header{
  position: sticky;
  top: 0;
  z-index: 50;

  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;

  padding:14px 18px;
  background: var(--header-bg);
  backdrop-filter: blur(var(--header-blur));
  border-bottom:1px solid var(--line);
}

.header-left{
  display:flex;
  align-items:center;
  gap:12px;
  min-width: 0;
}
.header-right{
  display:flex;
  align-items:center;
  gap:10px;
  flex: 0 0 auto;
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
  min-width: 0;
}

.brand-logo{
  height: 44px;
  width: auto;
  object-fit: contain;
  flex: 0 0 auto;
  filter: drop-shadow(0 2px 8px rgba(15,23,42,.10));
}

@media (min-width: 640px){
  .brand-logo{ height: 52px; }
}
@media (min-width: 1024px){
  .brand-logo{ height: 64px; }
}

.brand-text{
  display:flex;
  flex-direction:column;
  line-height:1.05;
  min-width:0;
}

.brand-title{
  font-weight: 900;
  letter-spacing: .2px;
  color: var(--bach);
  font-size: 14px;
}
.brand-subtitle{
  font-weight: 900;
  letter-spacing: .2px;
  color: var(--mozart);
  font-size: 14px;
}

.user-email{
  font-size:12px;
  color:var(--muted);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  max-width: 46vw;
}

/* =========================
   Buttons
========================= */
.btn{
  appearance:none;
  border:1px solid var(--line2);
  background:var(--panel);
  color:var(--ink);
  border-radius: 12px;

  min-height: var(--tap);
  padding:10px 12px;

  font-weight:900;
  font-size:13px;
  cursor:pointer;

  transition: transform .08s ease, box-shadow .15s ease, border-color .15s ease, background .15s ease, filter .15s ease;
  box-shadow: 0 1px 0 rgba(15,23,42,.05);
  user-select:none;
}
.btn:hover{
  border-color: rgba(15,23,42,.22);
  box-shadow: var(--shadow2);
}
.btn:active{ transform: translateY(1px); }
.btn:focus-visible{ box-shadow: var(--focus); }

.btn.primary{
  background: linear-gradient(135deg, var(--mozart), var(--bach));
  color:#fff;
  border-color: transparent;
}
.btn.primary:hover{ filter: brightness(1.03); }

.btn.ghost{
  background: rgba(255,255,255,.70);
}
.btn.ghost:hover{ background: rgba(255,255,255,.92); }

.btn.danger{
  background: rgba(239,68,68,.10);
  border-color: rgba(239,68,68,.25);
  color:#991b1b;
}
.btn.danger:hover{
  background: rgba(239,68,68,.14);
  border-color: rgba(239,68,68,.35);
}

/* =========================
   Layout main
   - Full width: no más "caja angosta".
========================= */
.app{
  width: min(1400px, calc(100vw - 32px));
  max-width: none;
  margin: 0 auto;
  padding: 18px 0 22px;
}

@media (min-width: 1440px){
  .app{ width: min(1600px, calc(100vw - 48px)); }
}

.unauthorized{
  width: min(980px, calc(100vw - 32px));
  margin: 16px auto;
  padding: 16px 18px;
  border:1px solid rgba(239,68,68,.25);
  background: rgba(239,68,68,.08);
  border-radius: var(--r);
  color:#7f1d1d;
  box-shadow: var(--shadow2);
}

/* =========================
   Toolbar (Mes / nav)
========================= */
.toolbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding: 14px;
  background: var(--panel);
  border:1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow2);
}

.toolbar-left{
  display:flex;
  align-items:center;
  gap:10px;
  min-width: 0;
}
.toolbar-right{
  display:flex;
  align-items:center;
  gap:10px;
  flex: 0 0 auto;
}

#currentMonth{
  margin:0;
  font-size:16px;
  font-weight:900;
  letter-spacing:.2px;
  color:var(--bach);
  text-transform: capitalize;
  white-space:nowrap;
}

/* =========================
   Overview (Hoy / Próximos 7)
========================= */
.overview{
  margin-top: var(--gap);
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--gap);
}

.overview-card{
  background: var(--panel);
  border:1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow2);
  padding: 12px 14px;
  overflow:hidden;
  position: relative;
}

.overview-card::before{
  content:"";
  position:absolute;
  inset:-2px;
  pointer-events:none;
  background:
    radial-gradient(380px 180px at 10% 0%, rgba(12,65,196,.10), transparent 62%),
    radial-gradient(300px 170px at 90% 0%, rgba(206,0,113,.10), transparent 62%);
  opacity:.9;
}

.overview-title{
  position: relative;
  font-weight: 900;
  letter-spacing:.2px;
  color: var(--bach);
  font-size: 13px;
  margin-bottom: 8px;
}

.overview-body{
  position: relative;
  display:flex;
  flex-direction: column;
  gap: 8px;
  min-height: 44px;
  color: var(--ink);
}

/* Overview item (ui.js) */
.ov-item{
  width: 100%;
  text-align:left;
  display:flex;
  align-items:flex-start;
  gap:10px;

  padding: 10px 10px;
  border:1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.78);
  border-radius: 14px;
  cursor:pointer;

  transition: box-shadow .15s ease, border-color .15s ease, transform .08s ease, background .15s ease;
}
.ov-item:hover{
  border-color: rgba(15,23,42,.18);
  background: rgba(255,255,255,.92);
  box-shadow: var(--shadow3);
}
.ov-item:active{ transform: translateY(1px); }
.ov-item:focus-visible{ box-shadow: var(--focus); }

.ov-dot{
  width:10px; height:10px;
  border-radius:999px;
  background: var(--mozart);
  margin-top: 4px;
  flex: 0 0 auto;
}

.ov-text{ min-width:0; display:flex; flex-direction:column; gap:2px; }
.ov-date{
  font-weight: 900;
  font-size: 11px;
  color: var(--muted);
  letter-spacing:.2px;
}
.ov-title{
  font-weight: 900;
  font-size: 12.5px;
  line-height: 1.15;
}
.ov-who{
  font-weight: 900;
  font-size: 12px;
  color: var(--mozart);
}

/* =========================
   Controls (Buscador + Segmented)
========================= */
.controls{
  margin-top: var(--gap);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: var(--gap);

  padding: 12px 14px;
  background: var(--panel);
  border:1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow2);
}

.controls-left{
  flex: 1 1 auto;
  min-width: 260px;
}

.controls-right{
  flex: 0 0 auto;
  display:flex;
  align-items:center;
  gap: 10px;
}

/* Buscador PRO */
#searchEvents{
  width: 100%;
  min-height: 48px;
  padding: 12px 14px 12px 44px;
  border-radius: 16px;

  border: 1px solid rgba(15,23,42,.14);
  background:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23667085' stroke-width='2.2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='7'/%3E%3Cpath d='M21 21l-4.35-4.35'/%3E%3C/svg%3E") 16px 50% no-repeat,
    linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.70));
  color: var(--ink);

  font-size: 13.5px;
  font-weight: 900;
  letter-spacing: .1px;

  box-shadow:
    0 1px 0 rgba(15,23,42,.04),
    0 10px 28px rgba(15,23,42,.06);
  transition: box-shadow .18s ease, border-color .18s ease, transform .08s ease, background .18s ease;
}

#searchEvents::placeholder{
  color: rgba(102,112,133,.85);
  font-weight: 900;
}

#searchEvents:hover{
  border-color: rgba(15,23,42,.22);
  box-shadow:
    0 1px 0 rgba(15,23,42,.04),
    0 14px 34px rgba(15,23,42,.08);
}

#searchEvents:focus,
#searchEvents:focus-visible{
  background:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%230C41C4' stroke-width='2.2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='7'/%3E%3Cpath d='M21 21l-4.35-4.35'/%3E%3C/svg%3E") 16px 50% no-repeat,
    linear-gradient(180deg, #ffffff, rgba(255,255,255,.86));
  border-color: rgba(12,65,196,.35);
  box-shadow: var(--focus-strong);
}

#searchEvents:active{ transform: translateY(1px); }

/* Segmented */
.seg{
  appearance:none;
  border:1px solid rgba(15,23,42,.14);
  background: rgba(255,255,255,.78);
  color: var(--muted);
  border-radius: 14px;

  min-height: 44px;
  padding: 10px 12px;

  font-weight: 900;
  font-size: 13px;
  cursor: pointer;

  box-shadow: 0 1px 0 rgba(15,23,42,.04);
  transition: transform .08s ease, box-shadow .15s ease, border-color .15s ease, background .15s ease, color .15s ease;
}

.seg:hover{
  border-color: rgba(15,23,42,.22);
  box-shadow: var(--shadow3);
}
.seg:active{ transform: translateY(1px); }

.seg.active,
.seg[aria-selected="true"]{
  color: #fff;
  border-color: transparent;
  background: linear-gradient(135deg, var(--mozart), var(--bach));
  box-shadow: 0 10px 26px rgba(12,65,196,.18);
}

/* =========================
   Filters (versión nueva con labels visibles)
========================= */
.filters{
  margin-top: var(--gap);
  padding: 12px 14px;
  background: var(--panel);
  border:1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow2);
}

.filter-row{
  display:grid;
  grid-template-columns: repeat(3, minmax(220px, 1fr));
  gap: 12px;
  align-items:end;
}

.filter-field{
  display:flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
}

.filter-field label{
  font-size: 12px;
  font-weight: 900;
  color: var(--muted);
}

select, input[type="date"], input[type="text"], textarea, input[type="number"]{
  width: 100%;
  min-height: var(--tap);
  padding: 10px 12px;

  border-radius: 12px;
  border:1px solid var(--line2);
  background: var(--panel2);
  color: var(--ink);
  font-size: 13px;
  font-weight:900;
  outline:none;
  transition: box-shadow .15s ease, border-color .15s ease, background .15s ease, transform .08s ease;
}

select:focus, input[type="date"]:focus, input[type="text"]:focus, textarea:focus, input[type="number"]:focus{
  box-shadow: var(--focus);
  border-color: rgba(12,65,196,.35);
  background:#fff;
}
select:active, input[type="date"]:active, input[type="text"]:active, textarea:active, input[type="number"]:active{
  transform: translateY(1px);
}

textarea{
  min-width: 100%;
  resize: vertical;
}

/* caret decente */
select{
  padding-right: 38px;
  background-image:
    linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.70)),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23667085' stroke-width='2.2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
  background-repeat: no-repeat, no-repeat;
  background-position: 0 0, right 12px center;
  background-size: auto, 18px 18px;
}

/* =========================
   Calendar
   - Desktop: 7 cols
   - Mobile: scroll horizontal para ver días (sin reventar)
========================= */
.calendar{
  margin-top: var(--gap);
  background: var(--panel);
  border:1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  overflow: hidden;
}

/* Wrapper: permite scroll horizontal solo cuando haga falta */
.calendar-grid{
  display:grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
}

/* Encabezados días */
.cal-head{
  padding: 10px 12px;
  font-size: 12px;
  font-weight: 900;
  color: var(--muted);
  background: rgba(15,23,42,.03);
  border-bottom:1px solid var(--line);
  text-transform: capitalize;
}

/* Celda día */
.day{
  min-height: var(--day-min-h);
  padding: 10px 10px 8px;

  border-right:1px solid var(--line);
  border-bottom:1px solid var(--line);

  background: #fff;
  cursor: pointer;
  position: relative;

  transition: background .15s ease, box-shadow .15s ease, transform .08s ease;
}

.day:nth-child(7n){
  border-right: none;
}

.day.muted{
  background: rgba(15,23,42,.02);
  color: rgba(15,23,42,.55);
}

.day:hover{
  background: rgba(12,65,196,.035);
  box-shadow: inset 0 0 0 1px rgba(12,65,196,.08);
}

.day:active{ transform: translateY(1px); }

.day.today{
  background:
    radial-gradient(350px 180px at 20% 0%, rgba(12,65,196,.10), transparent 60%),
    #fff;
}
.day.today .day-num{ color: var(--mozart); }

.day-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  margin-bottom: 8px;
}

.day-num{
  font-weight: 900;
  font-size: 13px;
  color: var(--ink);

  width: 26px;
  height: 26px;

  display:flex;
  align-items:center;
  justify-content:center;

  border-radius: 10px;
  background: rgba(15,23,42,.04);
}

/* ✅ Se ven TODOS los eventos:
   - event-list crece, pero si se pasa del max, scroll interno */
.event-list{
  display:flex;
  flex-direction: column;
  gap:6px;

  max-height: calc(var(--day-max-h) - 44px); /* 44px aprox header del día */
  overflow:auto;
  padding-right: 4px;
}

/* =========================
   Chips (eventos)
========================= */
.chip{
  width: 100%;
  text-align:left;

  border:1px solid rgba(15,23,42,.12);
  border-left: 5px solid var(--mozart);

  background: rgba(15,23,42,.02);
  color: var(--ink);

  padding: var(--chip-pad);
  border-radius: 12px;

  font-size: 12px;
  font-weight: 900;

  cursor:pointer;
  display:flex;
  align-items:center;
  gap:8px;

  line-height: 1.15;
  transition: transform .08s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease;
}

.chip:hover{
  background: rgba(12,65,196,.06);
  border-color: rgba(12,65,196,.22);
  box-shadow: 0 6px 16px rgba(12,65,196,.10);
}
.chip:active{ transform: translateY(1px); }
.chip:focus-visible{ box-shadow: var(--focus); }

.chip-dot{
  width: 14px;
  text-align:center;
  font-weight: 900;
  opacity: .92;
  flex: 0 0 auto;
}

.chip-text{
  min-width: 0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

/* @persona */
.chip-person{
  flex: 0 0 auto;
  margin-left:auto;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(12,65,196,.16);
  background: rgba(12,65,196,.08);
  color: var(--bach);
  font-weight: 900;
  font-size: 11.5px;
  white-space:nowrap;
}

/* Si el JS viejo todavía pinta chip-more, lo ocultamos.
   (mejor que no aparezca “+1 más” nunca) */
.chip-more{ display:none !important; }

/* =========================
   List view (vPRO)
========================= */
.list-view{
  margin-top: var(--gap);
  background: var(--panel);
  border:1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  overflow:hidden;
}

.list-head{
  padding: 12px 14px;
  border-bottom: 1px solid var(--line);
  background:
    radial-gradient(520px 240px at 10% 0%, rgba(12,65,196,.08), transparent 60%),
    rgba(15,23,42,.02);
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap: 10px;
}

.list-head h3{
  margin:0;
  font-size: 14.5px;
  font-weight: 900;
  color: var(--bach);
}
.list-meta{
  font-weight: 900;
  color: var(--muted);
  font-size: 12px;
  white-space: nowrap;
}

.list-body{
  padding: 12px;
  display:flex;
  flex-direction: column;
  gap: 10px;
}

.list-day{
  padding: 10px 10px;
  border-radius: 16px;
  border: 1px solid rgba(15,23,42,.08);
  background: rgba(15,23,42,.02);
}
.list-day-title{
  font-weight: 900;
  color: var(--bach);
  font-size: 12.5px;
  letter-spacing: .2px;
}

.list-item{
  width: 100%;
  text-align:left;
  appearance:none;

  display:flex;
  align-items:flex-start;
  justify-content: space-between;
  gap: 12px;

  padding: 12px 12px;
  border-radius: 16px;

  border: 1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.92);
  box-shadow: 0 1px 0 rgba(15,23,42,.04);
  cursor:pointer;

  transition: transform .08s ease, box-shadow .15s ease, border-color .15s ease, background .15s ease;
}

.list-item:hover{
  border-color: rgba(15,23,42,.18);
  background: #fff;
  box-shadow: var(--shadow3);
}
.list-item:active{ transform: translateY(1px); }
.list-item:focus-visible{ box-shadow: var(--focus); }

.list-dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  margin-top: 5px;
  flex: 0 0 auto;
}

.list-main{ min-width:0; display:flex; flex-direction:column; gap:6px; }
.list-title{
  font-weight: 900;
  font-size: 13px;
  line-height: 1.15;
  color: var(--ink);
}

.list-sub{
  display:flex;
  flex-wrap: wrap;
  gap: 6px;
}

.list-pill{
  padding: 5px 8px;
  border-radius: 999px;
  border: 1px solid rgba(15,23,42,.10);
  background: rgba(15,23,42,.03);
  font-weight: 900;
  font-size: 11.5px;
  color: var(--muted);
}
.list-pill.status{
  background: rgba(12,65,196,.06);
  border-color: rgba(12,65,196,.14);
  color: var(--bach);
}
.list-pill.who{
  background: rgba(12,65,196,.08);
  border-color: rgba(12,65,196,.16);
  color: var(--bach);
}
.list-pill.rec{
  background: rgba(206,0,113,.08);
  border-color: rgba(206,0,113,.18);
  color: var(--wagner);
}

.list-st{
  flex: 0 0 auto;
  font-weight: 900;
  margin-left: 6px;
}

/* =========================
   Modal + Overlay
========================= */
#modalOverlay,
.overlay{
  position: fixed;
  inset: 0;
  background: rgba(15,23,42,.40);
  backdrop-filter: blur(2px);
  z-index: 90;
}

.modal{
  position: fixed;
  inset: 0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 18px;
  z-index: 100;
}

.modal-content{
  width: min(640px, 100%);
  max-height: min(86vh, 820px);
  overflow: auto;

  background: var(--panel);
  border:1px solid var(--line);
  border-radius: 22px;
  box-shadow: var(--shadow);

  padding: 16px;
}

.modal-head{
  padding: 6px 6px 10px;
}
.modal-head h3{
  margin: 0 0 6px;
  font-size: 16px;
  font-weight: 900;
  color: var(--bach);
}
.modal-head p{
  margin:0;
  font-weight: 800;
}

/* Bloque “Eventos del día” (ui.js) */
.day-peek{
  margin: 0 6px 12px;
  padding: 12px 12px;
  border-radius: 18px;
  border: 1px solid rgba(15,23,42,.10);
  background:
    radial-gradient(420px 200px at 10% 0%, rgba(12,65,196,.08), transparent 62%),
    rgba(15,23,42,.02);
}

.day-peek-head{
  display:flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 8px;
}

.day-peek-title{
  font-weight: 900;
  color: var(--bach);
  font-size: 12.5px;
  letter-spacing:.2px;
}

.day-peek-sub{
  font-weight: 900;
  color: var(--muted);
  font-size: 12px;
}

.day-peek-list{
  display:flex;
  flex-direction: column;
  gap: 8px;
}

.day-peek-item{
  width:100%;
  text-align:left;
  appearance:none;
  cursor:pointer;

  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 10px;

  padding: 10px 10px;
  border-radius: 14px;
  border: 1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.90);

  transition: transform .08s ease, box-shadow .15s ease, border-color .15s ease, background .15s ease;
}
.day-peek-item:hover{
  border-color: rgba(15,23,42,.18);
  background: #fff;
  box-shadow: var(--shadow3);
}
.day-peek-item:active{ transform: translateY(1px); }
.day-peek-item:focus-visible{ box-shadow: var(--focus); }

.day-peek-empty{
  padding: 10px 10px;
  border-radius: 14px;
  border: 1px dashed rgba(15,23,42,.14);
  background: rgba(255,255,255,.75);
  font-weight: 900;
  color: var(--muted);
}

/* Form layout nuevo */
#eventForm{
  display:flex;
  flex-direction: column;
  gap: 10px;
  padding: 0 6px 6px;
}

#eventForm label{
  display:flex;
  flex-direction: column;
  gap: 6px;
  font-size: 12px;
  font-weight: 900;
  color: var(--muted);
}

.form-2col{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

#eventTitle,
#eventCategory,
#eventDate,
#eventStatus,
#eventNotes,
#eventAssignee,
#eventRepeatFreq,
#eventRepeatInterval,
#eventRepeatUntil{
  min-width: 100%;
}

.repeat-box{
  border: 1px solid rgba(15,23,42,.10);
  background: rgba(15,23,42,.02);
  border-radius: 18px;
  padding: 12px;
}

.repeat-head{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap: 10px;
  margin-bottom: 10px;
}
.repeat-title{
  font-weight: 900;
  color: var(--bach);
}
.repeat-sub{
  font-weight: 900;
  font-size: 12px;
}

.repeat-grid{
  display:grid;
  grid-template-columns: 1.2fr .7fr 1fr;
  gap: 12px;
  align-items:end;
}
.repeat-help{
  margin: 10px 0 0;
  font-weight: 800;
  font-size: 12px;
  color: var(--muted);
}

/* Acciones modal */
.modal-actions{
  margin-top: 10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 0 6px 6px;
}

.modal-actions-right{
  display:flex;
  gap:10px;
  flex-wrap: wrap;
}

/* =========================
   Toast (opcional)
========================= */
#toastHost{
  position: fixed;
  right: 14px;
  bottom: 14px;
  z-index: 200;
  display:flex;
  flex-direction: column;
  gap: 10px;
  pointer-events: none;
}
.toast{
  pointer-events: auto;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(15,23,42,.12);
  background: rgba(255,255,255,.92);
  box-shadow: var(--shadow3);
  font-weight: 900;
  color: var(--ink);
  max-width: min(420px, calc(100vw - 28px));
}
.toast.hide{
  opacity: 0;
  transform: translateY(6px);
  transition: opacity .2s ease, transform .2s ease;
}

/* =========================
   Responsive + calendar horizontal scroll
========================= */
@media (max-width: 980px){
  .overview{ grid-template-columns: 1fr; }
}

@media (max-width: 860px){
  .toolbar{
    flex-direction: column;
    align-items: stretch;
  }
  .toolbar-left, .toolbar-right{
    justify-content: space-between;
    width: 100%;
  }
  .user-email{ max-width: 70vw; }

  .brand-title, .brand-subtitle{
    font-size: 13px;
  }

  .controls{
    flex-direction: column;
    align-items: stretch;
  }
  .controls-right{
    justify-content: space-between;
  }

  .filter-row{
    grid-template-columns: 1fr;
  }

  .form-2col{
    grid-template-columns: 1fr;
  }
  .repeat-grid{
    grid-template-columns: 1fr;
  }
}

@media (max-width: 740px){
  /* Calendario: scroll horizontal para ver días sin “aplastarlos” */
  .calendar{ overflow:auto; }
  .calendar-grid{
    width: max(100%, calc(var(--cal-min-col) * 7));
    grid-template-columns: repeat(7, minmax(var(--cal-min-col), 1fr));
  }
  .cal-head{ position: sticky; top: 0; z-index: 2; }
}

@media (max-width: 620px){
  .app{
    width: calc(100vw - 20px);
    padding: 14px 0 18px;
  }

  .calendar{ border-radius: 16px; }
  .day{ min-height: 110px; padding: 9px; }

  .chip{ font-size: 11.5px; }
  .chip-person{ font-size: 11px; padding: 4px 7px; }

  .brand-logo{ height: 40px; }
  .brand-title, .brand-subtitle{ font-size: 12.5px; }

  .modal-content{
    max-height: 90vh;
    border-radius: 18px;
  }

  #searchEvents{ min-height: 46px; }
}

/* =========================
   Motion safety
========================= */
@media (prefers-reduced-motion: reduce){
  *{ transition: none !important; scroll-behavior: auto !important; }
}
